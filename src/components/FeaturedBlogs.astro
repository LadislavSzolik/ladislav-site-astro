---
import { getCollection } from "astro:content";
const allBlogPosts = (await getCollection("blog")).sort(
   (a, b) => b.data.date.valueOf() - a.data.date.valueOf(),
);
const pageTitle = "Featured posts";
---

<style>
   .featured-posts {
      max-width: var(--max-width);
      margin: 2rem auto;
      padding-inline: 1rem;

      & h2 {
         margin-block-end: 1rem;
      }
   }

   .blog-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
   }

   .blog-card {
      padding: 1.5rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background-color: var(--layer-01);
   }

   .date {
      font-size: var(--body-01);
      color: var(--text-secondary);
      margin: 0.4rem 0;
   }
</style>

<section class="featured-posts">
   <h2>{pageTitle}</h2>
   <div class="blog-grid">
      {
         allBlogPosts.map((post) => (
            <article class="blog-card">
               <h3>
                  <a href={`/blog/${post.id}`}>{post.data.title}</a>
               </h3>
               <p class="date">{post.data.date.toLocaleDateString()}</p>
               <p>{post.data.description}</p>
            </article>
         ))
      }
   </div>
</section>
