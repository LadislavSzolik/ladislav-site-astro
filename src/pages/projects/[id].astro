---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection, render } from "astro:content";
import { Image } from "astro:assets";
export async function getStaticPaths() {
   const projects = await getCollection("projects");
   return projects.map((project) => ({
      params: { id: project.id },
      props: { project },
   }));
}
const { project } = Astro.props;
const { Content } = await render(project);
---

<style>
   .project-header {
      background: linear-gradient(90deg, #e3ffe7 0%, #d9e7ff 100%);
   }
   .project-header-inner {
      max-width: var(--max-width);
      margin: 0 auto;
      padding-block-start: 4rem;
      padding-block-end: 2rem;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      align-items: center;

      h1 {
         font-size: var(--heading-01);
         font-family: var(--font-heading);
      }
   }
   .header-image {
      max-width: 800px;
      width: 100%;
      height: auto;
   }

   @media (max-width: 640px) {
      .project-header-inner h1 {
         line-height: 1.2;
         text-align: center;
      }
   }
   .project-content {
      padding-block-start: 72px;
      padding-inline: 1rem;
      display: block;
      margin: 0 auto;
      max-width: var(--max-width-project);

      ul,
      ol {
         padding-block-end: 0.6rem;
      }

      ul {
         padding-left: 1.2em;
         list-style-position: outside;
      }

      & ol {
         padding-inline-start: 26px;
      }

      & ol li {
         list-style: none;
         padding-inline-start: 16px;
         position: relative;
      }

      & ol li::marker {
         content: counter(list-item) ". ";
         padding-inline-start: 0;
         position: absolute;
         color: var(--text-attention);
         left: 0;
      }

      h1 {
         font-size: var(--heading-02);
         font-family: var(--font-heading);
         padding-block-end: 1rem;
      }
      h2 {
         font-size: var(--heading-03);
         font-family: var(--font-body);
         font-weight: 400;
         padding-block: 1rem 0.75rem;
      }
      h3 {
         font-size: var(--heading-04);
         font-family: var(--font-body);
         padding-block: 1rem 0.75rem;
      }
      figure {
         display: flex;
         flex-direction: column;
         padding-block: 1rem;
         align-items: center;

         img {
            width: 80%;
         }
      }
      figcaption {
         text-align: center;
         font-size: var(--body-01);
         color: var(--text-secondary);
         padding-block-start: 0.8rem;
         width: 80%;
      }

      img {
         height: auto;
         filter: drop-shadow(2px 2px 8px rgba(0, 0, 0, 0.1));
      }
      p {
         padding-block: 0.4rem;
      }
   }
</style>

<BaseLayout pageTitle={project.data.title} metaDesc={project.data.description}>
   <header class="project-header">
      <div class="project-header-inner">
         <Image
            src={project.data.client.logo}
            alt={project.data.client.name}
            width="180"
            height="24"
         />
         <h1>{project.data.title}</h1>
         <Image
            class="header-image"
            src={project.data.image}
            alt={project.data.description}
         />
      </div>
   </header>
   <main class="project-content">
      <Content />
   </main>
</BaseLayout>
